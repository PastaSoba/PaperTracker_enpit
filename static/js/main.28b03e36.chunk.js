(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(7),i=n.n(r),c=n(35),s=n.n(c),l=(n(40),n(10)),o=n(11),h=n(8),p=n(13),u=n(12),d=(n(41),function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleOnClick=a.handleOnClick.bind(Object(h.a)(a)),a}return Object(o.a)(n,[{key:"parsePaperInfo",value:function(e){var t=e.authors.map((function(e){return e.authorId}));return{title:e.title,url:e.url,year:e.year,doi:e.doi,authorId_list:t}}},{key:"sortByYear",value:function(e,t){return e.year>t.year?-1:1}},{key:"handleOnClick",value:function(){var e=this,t=document.getElementById("paperdoi").value;fetch("https://api.semanticscholar.org/v1/paper/"+t).then((function(e){return e.json()})).then((function(t){var n=e.parsePaperInfo(t);e.props.setPaper(n);var a=t.citations.map(e.parsePaperInfo),r=t.references.map(e.parsePaperInfo);a.sort(e.sortByYear),r.sort(e.sortByYear),e.props.setCiteAndRef(a,r)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("a",{children:" SemanticScholar Search : "}),Object(a.jsx)("input",{type:"search",placeholder:"\u8abf\u3079\u305f\u3044\u8ad6\u6587\u306eDOI\u3092\u5165\u529b",id:"paperdoi"}),Object(a.jsx)("button",{onClick:this.handleOnClick,children:" \u691c\u7d22 "})]})}}]),n}(i.a.Component)),j=n(9),b=n(22),f=n.n(b);var O=200,C=50,k=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(j.Group,{children:[Object(a.jsx)(j.Rect,{x:215*(this.props.col+1),y:65*this.props.row,width:O,height:C}),Object(a.jsx)(j.Text,{x:215*(this.props.col+1),y:65*this.props.row,width:O,height:C,text:this.props.year,fontSize:20,align:"center",verticalAlign:"middle"})]})}}]),n}(i.a.Component),y=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={color:a.props.defaultcolor,citations:null},a.clickhandler=a.clickhandler.bind(Object(h.a)(a)),a}return Object(o.a)(n,[{key:"clickhandler",value:function(){this.props.handleCellClicked(this.props.paper.doi)}},{key:"setSameAuthorMarker",value:function(){return this.props.isWrittenBySameAuthor?Object(a.jsx)(j.Rect,{x:215*(this.props.col+1)-3,y:65*this.props.row-3,width:206,height:56,fill:"black"}):null}},{key:"render",value:function(){return Object(a.jsxs)(j.Group,{onclick:this.clickhandler,children:[this.setSameAuthorMarker(),Object(a.jsx)(j.Rect,{x:215*(this.props.col+1),y:65*this.props.row,width:O,height:C,fill:this.state.color}),Object(a.jsx)(j.Text,{x:215*(this.props.col+1)+2,y:65*this.props.row+2,width:196,height:46,text:this.props.paper.title})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e.enableGetMag)return{color:e.defaultcolor};var n=null==t.citations?(e.paper.doi,Math.floor(201*Math.random())):t.citations,a=function(e,t,n){var a=(e-t)/(n-t),r=Math.floor(255*a).toString(16);return("00"+r).slice(-2)}(n,0,50);switch(e.defaultcolor){case"lightgreen":return{citations:n,color:"#"+a+"FF"+a};default:return{citations:n,color:"#FF"+a+a}}}}]),n}(i.a.Component),g=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)(j.Stage,{width:3e3,height:3e3,children:Object(a.jsx)(j.Layer,{children:function(){for(var t=[],n=0,r=0,i=e.props.citations,c=0;c<i.length;c++){0===c?t.push(Object(a.jsx)(k,{year:i[c].year,row:n,col:-1})):i[c].year===i[c-1].year?r++:(r=0,n++,t.push(Object(a.jsx)(k,{year:i[c].year,row:n,col:-1})));var s=f.a.intersection(e.props.paper.authorId_list,e.props.citations[c].authorId_list).length>0;t.push(Object(a.jsx)(y,{paper:i[c],row:n,col:r,defaultcolor:"lightgreen",isWrittenBySameAuthor:s,handleCellClicked:e.props.handleCellClicked,enableGetMag:e.props.enableGetCitationsMag}))}var l=e.props.references;r=0,n+=2;for(var o=0;o<l.length;o++){0===o?t.push(Object(a.jsx)(k,{year:l[o].year,row:n,col:-1})):l[o].year===l[o-1].year?r++:(r=0,n++,t.push(Object(a.jsx)(k,{year:l[o].year,row:n,col:-1})));var h=f.a.intersection(e.props.paper.authorId_list,e.props.references[o].authorId_list).length>0;t.push(Object(a.jsx)(y,{paper:l[o],row:n,col:r,defaultcolor:"lightpink",isWrittenBySameAuthor:h,handleCellClicked:e.props.handleCellClicked,enableGetMag:e.props.enableGetReferencesMag}))}return t}()})})}}]),n}(i.a.Component),v=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={paper:null,citations:[],references:[],enableGetCitationsMag:!1,enableGetReferencesMag:!1},a.handleCitationsCheck=a.handleCitationsCheck.bind(Object(h.a)(a)),a.handleReferencesCheck=a.handleReferencesCheck.bind(Object(h.a)(a)),a.handleSetCiteAndRef=a.handleSetCiteAndRef.bind(Object(h.a)(a)),a.handleSetPaper=a.handleSetPaper.bind(Object(h.a)(a)),a}return Object(o.a)(n,[{key:"handleCitationsCheck",value:function(){this.setState({enableGetCitationsMag:!this.state.enableGetCitationsMag})}},{key:"handleReferencesCheck",value:function(){this.setState({enableGetReferencesMag:!this.state.enableGetReferencesMag})}},{key:"handleSetCiteAndRef",value:function(e,t){this.setState({citations:e,references:t})}},{key:"handleSetPaper",value:function(e){this.setState({paper:e})}},{key:"handleCellClicked",value:function(e){document.getElementById("paperdoi").value=e}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)("header",{className:"App-header",children:[Object(a.jsx)("h1",{children:"Paper Tracker"}),Object(a.jsx)(d,{setPaper:this.handleSetPaper,setCiteAndRef:this.handleSetCiteAndRef}),Object(a.jsxs)("p",{children:["\u691c\u7d22\u8ad6\u6587\u540d:",Object(a.jsx)("a",{href:null===this.state.paper?"":this.state.paper.url,children:null===this.state.paper?"":this.state.paper.title})]}),Object(a.jsxs)("p",{children:["\u30aa\u30d7\u30b7\u30e7\u30f3\uff08\u30c7\u30e2\u52d5\u4f5c\uff09",Object(a.jsx)("br",{}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",onChange:this.handleCitationsCheck,checked:this.state.enableGetCitationsMag}),"\u88ab\u5f15\u7528\u8ad6\u6587\u306e\u5f71\u97ff\u5ea6\u3092\u53ef\u8996\u5316\u3059\u308b"]}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",onChange:this.handleReferencesCheck,checked:this.state.enableGetReferencesMag}),"\u5f15\u7528\u8ad6\u6587\u306e\u5f71\u97ff\u5ea6\u3092\u53ef\u8996\u5316\u3059\u308b"]})]})]}),Object(a.jsx)("div",{children:Object(a.jsx)(g,{paper:this.state.paper,citations:this.state.citations,references:this.state.references,enableGetCitationsMag:this.state.enableGetCitationsMag,enableGetReferencesMag:this.state.enableGetReferencesMag,handleCellClicked:this.handleCellClicked})})]})}}]),n}(i.a.Component),x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(v,{})}),document.getElementById("root")),x()}},[[86,1,2]]]);
//# sourceMappingURL=main.28b03e36.chunk.js.map