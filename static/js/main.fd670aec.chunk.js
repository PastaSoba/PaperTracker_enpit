(this.webpackJsonpPaperTracker=this.webpackJsonpPaperTracker||[]).push([[0],{40:function(e,t,a){},41:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(7),i=a.n(r),c=a(35),s=a.n(c),l=(a(40),a(10)),o=a(11),h=a(8),p=a(13),u=a(12),d=(a(41),function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleOnClick=n.handleOnClick.bind(Object(h.a)(n)),n}return Object(o.a)(a,[{key:"parsePaperInfo",value:function(e){var t=e.authors.map((function(e){return e.authorId}));return{title:e.title,url:e.url,year:e.year,doi:e.doi,authorId_list:t}}},{key:"sortByYear",value:function(e,t){return e.year>t.year?-1:1}},{key:"handleOnClick",value:function(){var e=this,t=document.getElementById("paperdoi").value;fetch("https://api.semanticscholar.org/v1/paper/"+t).then((function(e){return e.json()})).then((function(t){var a=e.parsePaperInfo(t);e.props.setPaper(a);var n=t.citations.map(e.parsePaperInfo),r=t.references.map(e.parsePaperInfo);n.sort(e.sortByYear),r.sort(e.sortByYear),e.props.setCiteAndRef(n,r)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("a",{children:" SemanticScholar Search : "}),Object(n.jsx)("input",{type:"search",placeholder:"\u8abf\u3079\u305f\u3044\u8ad6\u6587\u306eDOI\u3092\u5165\u529b",id:"paperdoi"}),Object(n.jsx)("button",{onClick:this.handleOnClick,children:" \u691c\u7d22 "})]})}}]),a}(i.a.Component)),j=a(9),b=a(22),f=a.n(b);var O=200,C=50,k=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(n.jsxs)(j.Group,{children:[Object(n.jsx)(j.Rect,{x:215*(this.props.col+1),y:65*this.props.row,width:O,height:C}),Object(n.jsx)(j.Text,{x:215*(this.props.col+1),y:65*this.props.row,width:O,height:C,text:this.props.year,fontSize:20,align:"center",verticalAlign:"middle"})]})}}]),a}(i.a.Component),y=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={color:n.props.defaultcolor,citations:null},n.clickhandler=n.clickhandler.bind(Object(h.a)(n)),n}return Object(o.a)(a,[{key:"clickhandler",value:function(){this.props.handleCellClicked(this.props.paper.doi)}},{key:"setSameAuthorMarker",value:function(){return this.props.isWrittenBySameAuthor?Object(n.jsx)(j.Rect,{x:215*(this.props.col+1)-3,y:65*this.props.row-3,width:206,height:56,fill:"black"}):null}},{key:"render",value:function(){return Object(n.jsxs)(j.Group,{onclick:this.clickhandler,children:[this.setSameAuthorMarker(),Object(n.jsx)(j.Rect,{x:215*(this.props.col+1),y:65*this.props.row,width:O,height:C,fill:this.state.color}),Object(n.jsx)(j.Text,{x:215*(this.props.col+1)+2,y:65*this.props.row+2,width:196,height:46,text:this.props.paper.title})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e.enableGetMag)return{color:e.defaultcolor};var a=null==t.citations?(e.paper.doi,Math.floor(201*Math.random())):t.citations,n=function(e,t,a){var n=(e-t)/(a-t),r=Math.floor(255*n).toString(16);return("00"+r).slice(-2)}(a,0,50);switch(e.defaultcolor){case"lightgreen":return{citations:a,color:"#"+n+"FF"+n};default:return{citations:a,color:"#FF"+n+n}}}}]),a}(i.a.Component),g=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsx)(j.Stage,{width:3e3,height:3e3,children:Object(n.jsx)(j.Layer,{children:function(){for(var t=[],a=0,r=0,i=e.props.citations,c=0;c<i.length;c++){0===c?t.push(Object(n.jsx)(k,{year:i[c].year,row:a,col:-1})):i[c].year===i[c-1].year?r++:(r=0,a++,t.push(Object(n.jsx)(k,{year:i[c].year,row:a,col:-1})));var s=f.a.intersection(e.props.paper.authorId_list,e.props.citations[c].authorId_list).length>0;t.push(Object(n.jsx)(y,{paper:i[c],row:a,col:r,defaultcolor:"lightgreen",isWrittenBySameAuthor:s,handleCellClicked:e.props.handleCellClicked,enableGetMag:e.props.enableGetCitationsMag}))}var l=e.props.references;r=0,a+=2;for(var o=0;o<l.length;o++){0===o?t.push(Object(n.jsx)(k,{year:l[o].year,row:a,col:-1})):l[o].year===l[o-1].year?r++:(r=0,a++,t.push(Object(n.jsx)(k,{year:l[o].year,row:a,col:-1})));var h=f.a.intersection(e.props.paper.authorId_list,e.props.references[o].authorId_list).length>0;t.push(Object(n.jsx)(y,{paper:l[o],row:a,col:r,defaultcolor:"lightpink",isWrittenBySameAuthor:h,handleCellClicked:e.props.handleCellClicked,enableGetMag:e.props.enableGetReferencesMag}))}return t}()})})}}]),a}(i.a.Component),v=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={paper:null,citations:[],references:[],enableGetCitationsMag:!1,enableGetReferencesMag:!1},n.handleCitationsCheck=n.handleCitationsCheck.bind(Object(h.a)(n)),n.handleReferencesCheck=n.handleReferencesCheck.bind(Object(h.a)(n)),n.handleSetCiteAndRef=n.handleSetCiteAndRef.bind(Object(h.a)(n)),n.handleSetPaper=n.handleSetPaper.bind(Object(h.a)(n)),n}return Object(o.a)(a,[{key:"handleCitationsCheck",value:function(){this.setState({enableGetCitationsMag:!this.state.enableGetCitationsMag})}},{key:"handleReferencesCheck",value:function(){this.setState({enableGetReferencesMag:!this.state.enableGetReferencesMag})}},{key:"handleSetCiteAndRef",value:function(e,t){this.setState({citations:e,references:t})}},{key:"handleSetPaper",value:function(e){this.setState({paper:e})}},{key:"handleCellClicked",value:function(e){document.getElementById("paperdoi").value=e}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsxs)("header",{className:"App-header",children:[Object(n.jsx)("h1",{children:"Paper Tracker"}),Object(n.jsx)(d,{setPaper:this.handleSetPaper,setCiteAndRef:this.handleSetCiteAndRef}),Object(n.jsxs)("p",{children:["\u691c\u7d22\u8ad6\u6587\u540d:",Object(n.jsx)("a",{href:null===this.state.paper?"":this.state.paper.url,children:null===this.state.paper?"":this.state.paper.title})]}),Object(n.jsxs)("p",{children:["\u30aa\u30d7\u30b7\u30e7\u30f3\uff08\u30c7\u30e2\u52d5\u4f5c\uff09",Object(n.jsx)("br",{}),Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"checkbox",onChange:this.handleCitationsCheck,checked:this.state.enableGetCitationsMag}),"\u88ab\u5f15\u7528\u8ad6\u6587\u306e\u5f71\u97ff\u5ea6\u3092\u53ef\u8996\u5316\u3059\u308b"]}),Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"checkbox",onChange:this.handleReferencesCheck,checked:this.state.enableGetReferencesMag}),"\u5f15\u7528\u8ad6\u6587\u306e\u5f71\u97ff\u5ea6\u3092\u53ef\u8996\u5316\u3059\u308b"]})]})]}),Object(n.jsx)("div",{children:Object(n.jsx)(g,{paper:this.state.paper,citations:this.state.citations,references:this.state.references,enableGetCitationsMag:this.state.enableGetCitationsMag,enableGetReferencesMag:this.state.enableGetReferencesMag,handleCellClicked:this.handleCellClicked})})]})}}]),a}(i.a.Component),x=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,87)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),i(e),c(e)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(v,{})}),document.getElementById("root")),x()}},[[86,1,2]]]);
//# sourceMappingURL=main.fd670aec.chunk.js.map